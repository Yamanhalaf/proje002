<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <title>Prone002</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Firebase SDK'ları -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.11.0/firebase-app.js";
    import { getDatabase, ref, push, onValue } from "https://www.gstatic.com/firebasejs/10.11.0/firebase-database.js";

    const firebaseConfig = {
      apiKey: "AIzaSyAvPrYgpMetg9QGh80RvnSUmVXiAA7b_mA",
      authDomain: "proje002-81e2e.firebaseapp.com",
      projectId: "proje002-81e2e",
      storageBucket: "proje002-81e2e.appspot.com",
      messagingSenderId: "29702728042",
      appId: "1:29702728042:web:f3a7e534d58a84a49a5d13",
      measurementId: "G-786EXKB0QF",
      databaseURL: "https://proje002-81e2e-default-rtdb.europe-west1.firebasedatabase.app"
    };

    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);

    window.firebaseDB = db;
    window.firebaseRef = ref;
    window.firebasePush = push;
    window.firebaseOnValue = onValue;
  </script>

  <style>
    /* ... (senin mevcut stillerin buraya aynen gelecek) ... */
  </style>
</head>
<body>
<!-- ... (HTML kısmı aynen korunacak) ... -->

<script type="module">
  // Kodun bu bloğunda Firebase ile skor kaydı ve okuma yapılıyor

  import { getDatabase, ref, push, onValue } from "https://www.gstatic.com/firebasejs/10.11.0/firebase-database.js";

  const db = getDatabase();
  const skorYolu = ref(db, 'highscores');

  function saveScore(name, score) {
    push(skorYolu, { name, score });
  }

  function showHighScores() {
    const scoreList = document.getElementById("scoreList");
    onValue(skorYolu, (snapshot) => {
      const data = snapshot.val();
      const scoreArray = [];
      for (let key in data) {
        scoreArray.push(data[key]);
      }
      scoreArray.sort((a, b) => b.score - a.score);
      scoreList.innerHTML = "";
      scoreArray.slice(0, 10).forEach((entry, index) => {
        const li = document.createElement("li");
        li.textContent = `${index + 1}. ${entry.name} - ${entry.score}`;
        scoreList.appendChild(li);
      });
    });
  }

  window.saveScoreToFirebase = saveScore;
  window.showHighScoresFromFirebase = showHighScores;
</script>

<script>
  // ... (mevcut oyun kodların)

  function endGame() {
    clearInterval(gameInterval);
    clearInterval(moveInterval);
    buttons.style.display = "none";
    gameArea.style.display = "none";
    gameOverScreen.style.display = "flex";
    const name = player.getAttribute("data-name") || "İsimsiz";
    window.saveScoreToFirebase(name, score);
    window.showHighScoresFromFirebase();
  }

  window.addEventListener("DOMContentLoaded", () => {
    window.showHighScoresFromFirebase();
  });
</script>

</body>
</html>
